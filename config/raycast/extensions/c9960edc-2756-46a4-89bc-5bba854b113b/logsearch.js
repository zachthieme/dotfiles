"use strict";var oe=Object.create;var bt=Object.defineProperty;var ue=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var ce=Object.getPrototypeOf,fe=Object.prototype.hasOwnProperty;var gt=(r,o)=>()=>(o||r((o={exports:{}}).exports,o),o.exports),he=(r,o)=>{for(var f in o)bt(r,f,{get:o[f],enumerable:!0})},Wt=(r,o,f,h)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of le(o))!fe.call(r,d)&&d!==f&&bt(r,d,{get:()=>o[d],enumerable:!(h=ue(o,d))||h.enumerable});return r};var vt=(r,o,f)=>(f=r!=null?oe(ce(r)):{},Wt(o||!r||!r.__esModule?bt(f,"default",{value:r,enumerable:!0}):f,r)),de=r=>Wt(bt({},"__esModule",{value:!0}),r);var Ht=gt((Tt,Nt)=>{(function(r,o){typeof Tt=="object"&&typeof Nt<"u"?Nt.exports=o():typeof define=="function"&&define.amd?define(o):(r=typeof globalThis<"u"?globalThis:r||self,r.MiniSearch=o())})(Tt,function(){"use strict";var r=function(){return r=Object.assign||function(t){for(var e,i=1,a=arguments.length;i<a;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},r.apply(this,arguments)};function o(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),a,s=[],u;try{for(;(t===void 0||t-- >0)&&!(a=i.next()).done;)s.push(a.value)}catch(l){u={error:l}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return s}function h(n,t,e){if(e||arguments.length===2)for(var i=0,a=t.length,s;i<a;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))}var d="ENTRIES",C="KEYS",L="VALUES",m="",J=function(){function n(t,e){var i=t._tree,a=Array.from(i.keys());this.set=t,this._type=e,this._path=a.length>0?[{node:i,keys:a}]:[]}return n.prototype.next=function(){var t=this.dive();return this.backtrack(),t},n.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var t=B(this._path),e=t.node,i=t.keys;return B(i)===m?{done:!1,value:this.result()}:(this._path.push({node:e.get(B(i)),keys:Array.from(e.get(B(i)).keys())}),this.dive())},n.prototype.backtrack=function(){this._path.length!==0&&(B(this._path).keys.pop(),!(B(this._path).keys.length>0)&&(this._path.pop(),this.backtrack()))},n.prototype.key=function(){return this.set._prefix+this._path.map(function(t){var e=t.keys;return B(e)}).filter(function(t){return t!==m}).join("")},n.prototype.value=function(){return B(this._path).node.get(m)},n.prototype.result=function(){return this._type===L?this.value():this._type===C?this.key():[this.key(),this.value()]},n.prototype[Symbol.iterator]=function(){return this},n}(),B=function(n){return n[n.length-1]},q=function(n,t,e){var i=new Map;if(t===void 0)return i;for(var a=t.length+1,s=a+e,u=new Uint8Array(s*a),l=0;l<a;l++)u[l]=l;return _(n,t,e,i,u,a,a,""),i},_=function(n,t,e,i,a,s,u,l){var c,v;try{t:for(var F=o(n.keys()),M=F.next();!M.done;M=F.next()){var w=M.value;if(w===m){var D=a[s-1];D<=e&&i.set(l,[n.get(w),D])}else{for(var E=0;E<w.length;E++){for(var O=w[E],A=s+u*E,k=A-u,z=a[A]=a[k]+1,T=0;T<u-1;T++){var Y=O!==t[T],N=a[k+T]+ +Y,R=a[k+T+1]+1,H=a[A+T]+1,U=a[A+T+1]=Math.min(N,R,H);U<z&&(z=U)}if(z>e)continue t}_(n.get(w),t,e,i,a,s+u*w.length,u,l+w)}}}catch(Z){c={error:Z}}finally{try{M&&!M.done&&(v=F.return)&&v.call(F)}finally{if(c)throw c.error}}},X=function(){function n(t,e){t===void 0&&(t=new Map),e===void 0&&(e=""),this._size=void 0,this._tree=t,this._prefix=e}return n.prototype.atPrefix=function(t){var e,i;if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");var a=f(ot(this._tree,t.slice(this._prefix.length)),2),s=a[0],u=a[1];if(s===void 0){var l=f(ut(u),2),c=l[0],v=l[1];try{for(var F=o(c.keys()),M=F.next();!M.done;M=F.next()){var w=M.value;if(w!==m&&w.startsWith(v)){var D=new Map;return D.set(w.slice(v.length),c.get(w)),new n(D,t)}}}catch(E){e={error:E}}finally{try{M&&!M.done&&(i=F.return)&&i.call(F)}finally{if(e)throw e.error}}}return new n(s,t)},n.prototype.clear=function(){this._size=void 0,this._tree.clear()},n.prototype.delete=function(t){return this._size=void 0,Et(this._tree,t)},n.prototype.entries=function(){return new J(this,d)},n.prototype.forEach=function(t){var e,i;try{for(var a=o(this),s=a.next();!s.done;s=a.next()){var u=f(s.value,2),l=u[0],c=u[1];t(l,c,this)}}catch(v){e={error:v}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}},n.prototype.fuzzyGet=function(t,e){return q(this._tree,t,e)},n.prototype.get=function(t){var e=Q(this._tree,t);return e!==void 0?e.get(m):void 0},n.prototype.has=function(t){var e=Q(this._tree,t);return e!==void 0&&e.has(m)},n.prototype.keys=function(){return new J(this,C)},n.prototype.set=function(t,e){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;var i=yt(this._tree,t);return i.set(m,e),this},Object.defineProperty(n.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var t=this.entries();!t.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),n.prototype.update=function(t,e){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;var i=yt(this._tree,t);return i.set(m,e(i.get(m))),this},n.prototype.fetch=function(t,e){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;var i=yt(this._tree,t),a=i.get(m);return a===void 0&&i.set(m,a=e()),a},n.prototype.values=function(){return new J(this,L)},n.prototype[Symbol.iterator]=function(){return this.entries()},n.from=function(t){var e,i,a=new n;try{for(var s=o(t),u=s.next();!u.done;u=s.next()){var l=f(u.value,2),c=l[0],v=l[1];a.set(c,v)}}catch(F){e={error:F}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return a},n.fromObject=function(t){return n.from(Object.entries(t))},n}(),ot=function(n,t,e){var i,a;if(e===void 0&&(e=[]),t.length===0||n==null)return[n,e];try{for(var s=o(n.keys()),u=s.next();!u.done;u=s.next()){var l=u.value;if(l!==m&&t.startsWith(l))return e.push([n,l]),ot(n.get(l),t.slice(l.length),e)}}catch(c){i={error:c}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return e.push([n,t]),ot(void 0,"",e)},Q=function(n,t){var e,i;if(t.length===0||n==null)return n;try{for(var a=o(n.keys()),s=a.next();!s.done;s=a.next()){var u=s.value;if(u!==m&&t.startsWith(u))return Q(n.get(u),t.slice(u.length))}}catch(l){e={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}},yt=function(n,t){var e,i,a,s;if(t.length===0||n==null)return n;try{for(var u=o(n.keys()),l=u.next();!l.done;l=u.next()){var c=l.value;if(c!==m&&t.startsWith(c))return yt(n.get(c),t.slice(c.length))}}catch(E){e={error:E}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}try{for(var v=o(n.keys()),F=v.next();!F.done;F=v.next()){var c=F.value;if(c!==m&&c.startsWith(t[0])){var M=Lt(t,c),w=new Map;return w.set(c.slice(M),n.get(c)),n.set(t.slice(0,M),w),n.delete(c),yt(w,t.slice(M))}}}catch(E){a={error:E}}finally{try{F&&!F.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}var D=new Map;return n.set(t,D),D},Lt=function(n,t){for(var e=Math.min(n.length,t.length),i=0;i<e;i++)if(n[i]!==t[i])return i;return e},Et=function(n,t){var e=f(ot(n,t),2),i=e[0],a=e[1];if(i!==void 0){if(i.delete(m),i.size===0)xt(a);else if(i.size===1){var s=f(i.entries().next().value,2),u=s[0],l=s[1];lt(a,u,l)}}},xt=function(n){if(n.length!==0){var t=f(ut(n),2),e=t[0],i=t[1];if(e.delete(i),e.size===0)xt(n.slice(0,-1));else if(e.size===1){var a=f(e.entries().next().value,2),s=a[0],u=a[1];s!==m&&lt(n.slice(0,-1),s,u)}}},lt=function(n,t,e){if(n.length!==0){var i=f(ut(n),2),a=i[0],s=i[1];a.set(s+t,e),a.delete(s)}},ut=function(n){return n[n.length-1]},ct,pt="or",St="and",V="and_not",j=function(){function n(t){if(t?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');this._options=r(r(r({},p),t),{searchOptions:r(r({},x),t.searchOptions||{})}),this._index=new X,this._documentCount=0,this._documentIds=new Map,this._fieldIds={},this._fieldLength=new Map,this._averageFieldLength=[],this._nextId=0,this._storedFields=new Map,this.addFields(this._options.fields)}return n.prototype.add=function(t){var e,i,a,s,u=this._options,l=u.extractField,c=u.tokenize,v=u.processTerm,F=u.fields,M=u.idField,w=l(t,M);if(w==null)throw new Error('MiniSearch: document does not have ID field "'.concat(M,'"'));var D=this.addDocumentId(w);this.saveStoredFields(D,t);try{for(var E=o(F),O=E.next();!O.done;O=E.next()){var A=O.value,k=l(t,A);if(k!=null){var z=c(k.toString(),A),T=this._fieldIds[A];this.addFieldLength(D,T,this.documentCount-1,z.length);try{for(var Y=(a=void 0,o(z)),N=Y.next();!N.done;N=Y.next()){var R=N.value,H=v(R,A);H&&this.addTerm(T,D,H)}}catch(U){a={error:U}}finally{try{N&&!N.done&&(s=Y.return)&&s.call(Y)}finally{if(a)throw a.error}}}}}catch(U){e={error:U}}finally{try{O&&!O.done&&(i=E.return)&&i.call(E)}finally{if(e)throw e.error}}},n.prototype.addAll=function(t){var e,i;try{for(var a=o(t),s=a.next();!s.done;s=a.next()){var u=s.value;this.add(u)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}},n.prototype.addAllAsync=function(t,e){var i=this;e===void 0&&(e={});var a=e.chunkSize,s=a===void 0?10:a,u={chunk:[],promise:Promise.resolve()},l=t.reduce(function(F,M,w){var D=F.chunk,E=F.promise;return D.push(M),(w+1)%s===0?{chunk:[],promise:E.then(function(){return new Promise(function(O){return setTimeout(O,0)})}).then(function(){return i.addAll(D)})}:{chunk:D,promise:E}},u),c=l.chunk,v=l.promise;return v.then(function(){return i.addAll(c)})},n.prototype.remove=function(t){var e,i,a,s,u,l,c=this._options,v=c.tokenize,F=c.processTerm,M=c.extractField,w=c.fields,D=c.idField,E=M(t,D);if(E==null)throw new Error('MiniSearch: document does not have ID field "'.concat(D,'"'));try{for(var O=o(this._documentIds),A=O.next();!A.done;A=O.next()){var k=f(A.value,2),z=k[0],T=k[1];if(E===T){try{for(var Y=(a=void 0,o(w)),N=Y.next();!N.done;N=Y.next()){var R=N.value,H=M(t,R);if(H!=null){var U=v(H.toString(),R),Z=this._fieldIds[R];try{for(var tt=(u=void 0,o(U)),K=tt.next();!K.done;K=tt.next()){var it=K.value,rt=F(it,R);rt&&this.removeTerm(Z,z,rt)}}catch(st){u={error:st}}finally{try{K&&!K.done&&(l=tt.return)&&l.call(tt)}finally{if(u)throw u.error}}this.removeFieldLength(z,Z,this.documentCount,U.length)}}}catch(st){a={error:st}}finally{try{N&&!N.done&&(s=Y.return)&&s.call(Y)}finally{if(a)throw a.error}}this._storedFields.delete(z),this._documentIds.delete(z),this._fieldLength.delete(z),this._documentCount-=1;return}}}catch(st){e={error:st}}finally{try{A&&!A.done&&(i=O.return)&&i.call(O)}finally{if(e)throw e.error}}throw new Error("MiniSearch: cannot remove document with ID ".concat(E,": it is not in the index"))},n.prototype.removeAll=function(t){var e,i;if(t)try{for(var a=o(t),s=a.next();!s.done;s=a.next()){var u=s.value;this.remove(u)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new X,this._documentCount=0,this._documentIds=new Map,this._fieldLength=new Map,this._averageFieldLength=[],this._storedFields=new Map,this._nextId=0}},n.prototype.search=function(t,e){var i,a;e===void 0&&(e={});var s=this.executeQuery(t,e),u=[];try{for(var l=o(s),c=l.next();!c.done;c=l.next()){var v=f(c.value,2),F=v[0],M=v[1],w=M.score,D=M.match,E=M.terms,O={id:this._documentIds.get(F),terms:S(E),score:w,match:D};Object.assign(O,this._storedFields.get(F)),(e.filter==null||e.filter(O))&&u.push(O)}}catch(A){i={error:A}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return u.sort(function(A,k){var z=A.score,T=k.score;return z<T?1:-1}),u},n.prototype.autoSuggest=function(t,e){var i,a,s,u;e===void 0&&(e={}),e=r(r({},b),e);var l=new Map;try{for(var c=o(this.search(t,e)),v=c.next();!v.done;v=c.next()){var F=v.value,M=F.score,w=F.terms,D=w.join(" "),E=l.get(D);E!=null?(E.score+=M,E.count+=1):l.set(D,{score:M,terms:w,count:1})}}catch(N){i={error:N}}finally{try{v&&!v.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}var O=[];try{for(var A=o(l),k=A.next();!k.done;k=A.next()){var z=f(k.value,2),E=z[0],T=z[1],M=T.score,w=T.terms,Y=T.count;O.push({suggestion:E,terms:w,score:M/Y})}}catch(N){s={error:N}}finally{try{k&&!k.done&&(u=A.return)&&u.call(A)}finally{if(s)throw s.error}}return O.sort(function(N,R){var H=N.score,U=R.score;return H<U?1:-1}),O},Object.defineProperty(n.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),n.loadJSON=function(t,e){if(e==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return n.loadJS(JSON.parse(t),e)},n.getDefault=function(t){if(p.hasOwnProperty(t))return ft(p,t);throw new Error('MiniSearch: unknown option "'.concat(t,'"'))},n.loadJS=function(t,e){var i,a,s,u,l=t.index,c=t.documentCount,v=t.nextId,F=t.documentIds,M=t.fieldIds,w=t.fieldLength,D=t.averageFieldLength,E=t.storedFields,O=t.serializationVersion;if(O!==1)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var A=new n(e);A._documentCount=c,A._nextId=v,A._documentIds=I(F),A._fieldIds=M,A._fieldLength=I(w),A._averageFieldLength=D,A._storedFields=I(E),A._index=new X;try{for(var k=o(l),z=k.next();!z.done;z=k.next()){var T=f(z.value,2),Y=T[0],N=T[1],R=new Map;try{for(var H=(s=void 0,o(Object.keys(N))),U=H.next();!U.done;U=H.next()){var Z=U.value,tt=N[Z],K=tt.df,it=tt.ds;R.set(parseInt(Z,10),{df:K,ds:I(it)})}}catch(rt){s={error:rt}}finally{try{U&&!U.done&&(u=H.return)&&u.call(H)}finally{if(s)throw s.error}}A._index.set(Y,R)}}catch(rt){i={error:rt}}finally{try{z&&!z.done&&(a=k.return)&&a.call(k)}finally{if(i)throw i.error}}return A},n.prototype.executeQuery=function(t,e){var i=this;if(e===void 0&&(e={}),typeof t=="string")return this.executeSearch(t,e);var a=t.queries.map(function(s){var u=r(r(r({},e),t),{queries:void 0});return i.executeQuery(s,u)});return this.combineResults(a,t.combineWith)},n.prototype.executeSearch=function(t,e){var i=this;e===void 0&&(e={});var a=this._options,s=a.tokenize,u=a.processTerm,l=a.searchOptions,c=r(r({tokenize:s,processTerm:u},l),e),v=c.tokenize,F=c.processTerm,M=v(t).map(function(E){return F(E)}).filter(function(E){return!!E}),w=M.map(y(c)),D=w.map(function(E){return i.executeQuerySpec(E,c)});return this.combineResults(D,c.combineWith)},n.prototype.executeQuerySpec=function(t,e){var i,a,s,u,l=r(r({},this._options.searchOptions),e),c=(l.fields||this._options.fields).reduce(function(st,Yt){var zt;return r(r({},st),(zt={},zt[Yt]=ft(st,Yt)||1,zt))},l.boost||{}),v=l.boostDocument,F=l.weights,M=l.maxFuzzy,w=r(r({},x.weights),F),D=w.fuzzy,E=w.prefix,O=this.termResults(t.term,c,v,this._index.get(t.term)),A,k;if(t.prefix&&(A=this._index.atPrefix(t.term)),t.fuzzy){var z=t.fuzzy===!0?.2:t.fuzzy,T=z<1?Math.min(M,Math.round(t.term.length*z)):z;k=this._index.fuzzyGet(t.term,T)}if(A)try{for(var Y=o(A),N=Y.next();!N.done;N=Y.next()){var R=f(N.value,2),H=R[0],U=R[1],Z=H.length-t.term.length;if(Z){k?.delete(H);var tt=.3*Z/H.length;this.termResults(H,c,v,U,O,E,tt)}}}catch(st){i={error:st}}finally{try{N&&!N.done&&(a=Y.return)&&a.call(Y)}finally{if(i)throw i.error}}if(k)try{for(var K=o(k.keys()),it=K.next();!it.done;it=K.next()){var H=it.value,rt=f(k.get(H),2),U=rt[0],Z=rt[1];if(Z){var tt=Z/H.length;this.termResults(H,c,v,U,O,D,tt)}}}catch(st){s={error:st}}finally{try{it&&!it.done&&(u=K.return)&&u.call(K)}finally{if(s)throw s.error}}return O},n.prototype.combineResults=function(t,e){if(e===void 0&&(e=pt),t.length===0)return new Map;var i=e.toLowerCase();return t.reduce(At[i])||new Map},n.prototype.toJSON=function(){var t,e,i,a,s=[];try{for(var u=o(this._index),l=u.next();!l.done;l=u.next()){var c=f(l.value,2),v=c[0],F=c[1],M={};try{for(var w=(i=void 0,o(F)),D=w.next();!D.done;D=w.next()){var E=f(D.value,2),O=E[0],A=E[1],k=A.df,z=A.ds;M[O]={df:k,ds:Object.fromEntries(z)}}}catch(T){i={error:T}}finally{try{D&&!D.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}s.push([v,M])}}catch(T){t={error:T}}finally{try{l&&!l.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._averageFieldLength,storedFields:Object.fromEntries(this._storedFields),index:s,serializationVersion:1}},n.prototype.termResults=function(t,e,i,a,s,u,l){var c,v,F,M,w;if(s===void 0&&(s=new Map),u===void 0&&(u=1),l===void 0&&(l=0),a==null)return s;try{for(var D=o(Object.keys(e)),E=D.next();!E.done;E=D.next()){var O=E.value,A=e[O],k=this._fieldIds[O],z=a.get(k);if(z!=null)try{for(var T=(F=void 0,o(z.ds)),Y=T.next();!Y.done;Y=T.next()){var N=f(Y.value,2),R=N[0],H=N[1],U=i?i(this._documentIds.get(R),t):1;if(U){var Z=this._fieldLength.get(R)[k]/this._averageFieldLength[k],tt=u*U*g(H,z.df,this._documentCount,Z,A,l),K=s.get(R);if(K){K.score+=tt;var it=ft(K.match,t);it?it.push(O):(K.match[t]=[O],K.terms.push(t))}else s.set(R,{score:tt,match:(w={},w[t]=[O],w),terms:[t]})}}}catch(rt){F={error:rt}}finally{try{Y&&!Y.done&&(M=T.return)&&M.call(T)}finally{if(F)throw F.error}}}}catch(rt){c={error:rt}}finally{try{E&&!E.done&&(v=D.return)&&v.call(D)}finally{if(c)throw c.error}}return s},n.prototype.addTerm=function(t,e,i){var a=this._index.fetch(i,P),s=a.get(t);if(s==null)s={df:1,ds:new Map},s.ds.set(e,1),a.set(t,s);else{var u=s.ds.get(e);u==null&&(s.df+=1),s.ds.set(e,(u||0)+1)}},n.prototype.removeTerm=function(t,e,i){if(!this._index.has(i)){this.warnDocumentChanged(e,t,i);return}var a=this._index.fetch(i,P),s=a.get(t);s==null||s.ds.get(e)==null?this.warnDocumentChanged(e,t,i):s.ds.get(e)<=1?s.df<=1?a.delete(t):(s.df-=1,s.ds.delete(e)):s.ds.set(e,s.ds.get(e)-1),this._index.get(i).size===0&&this._index.delete(i)},n.prototype.warnDocumentChanged=function(t,e,i){var a,s;if(!(console==null||console.warn==null))try{for(var u=o(Object.keys(this._fieldIds)),l=u.next();!l.done;l=u.next()){var c=l.value;if(this._fieldIds[c]===e){console.warn("MiniSearch: document with ID ".concat(this._documentIds.get(t),' has changed before removal: term "').concat(i,'" was not present in field "').concat(c,'". Removing a document after it has changed can corrupt the index!'));return}}}catch(v){a={error:v}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}},n.prototype.addDocumentId=function(t){var e=this._nextId;return this._documentIds.set(e,t),this._documentCount+=1,this._nextId+=1,e},n.prototype.addFields=function(t){for(var e=0;e<t.length;e++)this._fieldIds[t[e]]=e},n.prototype.addFieldLength=function(t,e,i,a){var s=this._fieldLength.get(t);s==null&&this._fieldLength.set(t,s=[]),s[e]=a;var u=this._averageFieldLength[e]||0,l=u*i+a;this._averageFieldLength[e]=l/(i+1)},n.prototype.removeFieldLength=function(t,e,i,a){var s=this._averageFieldLength[e]*i-a;this._averageFieldLength[e]=s/(i-1)},n.prototype.saveStoredFields=function(t,e){var i,a,s=this._options,u=s.storeFields,l=s.extractField;if(!(u==null||u.length===0)){var c=this._storedFields.get(t);c==null&&this._storedFields.set(t,c={});try{for(var v=o(u),F=v.next();!F.done;F=v.next()){var M=F.value,w=l(e,M);w!==void 0&&(c[M]=w)}}catch(D){i={error:D}}finally{try{F&&!F.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}}},n}(),ft=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)?n[t]:void 0},At=(ct={},ct[pt]=function(n,t){var e,i,a;try{for(var s=o(t.keys()),u=s.next();!u.done;u=s.next()){var l=u.value,c=n.get(l);if(c==null)n.set(l,t.get(l));else{var v=t.get(l),F=v.score,M=v.match,w=v.terms;c.score=(c.score+F)*1.5,c.match=Object.assign(c.match,M),(a=c.terms).push.apply(a,h([],f(w),!1))}}}catch(D){e={error:D}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return n},ct[St]=function(n,t){var e,i,a=new Map;try{for(var s=o(t.keys()),u=s.next();!u.done;u=s.next()){var l=u.value,c=n.get(l);if(c!=null){var v=t.get(l),F=v.score,M=v.match,w=v.terms;a.set(l,{score:c.score+F,match:Object.assign(c.match,M),terms:h(h([],f(c.terms),!1),f(w),!1)})}}}catch(D){e={error:D}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return a},ct[V]=function(n,t){var e,i;try{for(var a=o(t.keys()),s=a.next();!s.done;s=a.next()){var u=s.value;n.delete(u)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}return n},ct),$=function(n,t,e){return n*Math.log(e/t)},g=function(n,t,e,i,a,s){var u=a/(1+.333*a*s);return u*$(n,t,e)/i},y=function(n){return function(t,e,i){var a=typeof n.fuzzy=="function"?n.fuzzy(t,e,i):n.fuzzy||!1,s=typeof n.prefix=="function"?n.prefix(t,e,i):n.prefix===!0;return{term:t,fuzzy:a,prefix:s}}},S=function(n){return n.filter(function(t,e,i){return i.indexOf(t)===e})},p={idField:"id",extractField:function(n,t){return n[t]},tokenize:function(n,t){return n.split(G)},processTerm:function(n,t){return n.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},x={combineWith:pt,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375}},b={prefix:function(n,t,e){return t===e.length-1}},P=function(){return new Map},I=function(n){var t,e,i=new Map;try{for(var a=o(Object.keys(n)),s=a.next();!s.done;s=a.next()){var u=s.value;i.set(parseInt(u,10),n[u])}}catch(l){t={error:l}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return i},G=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;return j})});var Ut=gt((Ct,Jt)=>{(function(r,o){typeof Ct=="object"&&typeof Jt<"u"?o(Ct):typeof define=="function"&&define.amd?define(["exports"],o):o((r||self).logseqDateutils={})})(Ct,function(r){var o=function(h){return h+(h>0?["th","st","nd","rd"][h>3&&h<21||h%10>3?0:h%10]:"")},f=function(h){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][h.getDay()]};r.getDateForPage=function(h,d){var C=h.getFullYear(),L=h.toString().substring(4,7),m=h.getMonth()+1,J=h.getDate(),B=h.toLocaleString("default",{month:"long"});if(d==="MMM do yyyy")return"[["+L+" "+o(J)+", "+C+"]]";if(d.includes("yyyy")&&(d.includes("MM")||d.includes("MMM"))&&d.includes("dd")&&(d.includes("EEEE")||d.includes("EEE")||d.includes("E"))){var q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_={yyyy:C,dd:("0"+J).slice(-2),MM:("0"+m).slice(-2),MMMM:B,EEEE:q[h.getDay()],EEE:q[h.getDay()].substring(0,3),E:q[h.getDay()].substring(0,1)};return"[["+d.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,function(Q){return _[Q]})+"]]"}if(d==="do MMMM yyyy"||d==="MMMM do, yyyy"){var X={yyyy:C,do:o(J),MMMM:B};return"[["+d.replace(/yyyy|do|MMMM/gi,function(Q){return X[Q]})+"]]"}if(d.includes("yyyy")&&d.includes("MM")&&d.includes("dd")){var ot={yyyy:C,dd:("0"+J).slice(-2),MM:("0"+m).slice(-2)};return"[["+d.replace(/yyyy|dd|MM/gi,function(Q){return ot[Q]})+"]]"}return"[["+L+" "+o(J)+", "+C+"]]"},r.getDateForPageWithoutBrackets=function(h,d){var C=h.getFullYear(),L=h.toString().substring(4,7),m=h.getMonth()+1,J=h.getDate(),B=h.toLocaleString("default",{month:"long"});if(d==="MMM do yyyy")return L+" "+o(J)+", "+C;if(d.includes("yyyy")&&d.includes("MM")&&d.includes("dd")&&(d.includes("EEEE")||d.includes("EEE")||d.includes("E"))){var q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_={yyyy:C,dd:("0"+J).slice(-2),MM:("0"+m).slice(-2),EEEE:q[h.getDay()],EEE:q[h.getDay()].substring(0,3),E:q[h.getDay()].substring(0,1)};return""+d.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,function(Q){return _[Q]})}if(d==="do MMMM yyyy"||d==="MMMM do, yyyy"){var X={yyyy:C,do:o(J),MMMM:B};return""+d.replace(/yyyy|do|MMMM/gi,function(Q){return X[Q]})}if(d.includes("yyyy")&&d.includes("MM")&&d.includes("dd")){var ot={yyyy:C,dd:("0"+J).slice(-2),MM:("0"+m).slice(-2)};return""+d.replace(/yyyy|dd|MM/gi,function(Q){return ot[Q]})}return d==="MMMM do, yyyy"?h.toLocaleString("default",{month:"long"})+" "+o(J)+", "+C:d==="do MMM yyyy"?o(J)+" "+L+" "+C:L+" "+o(J)+", "+C},r.getDayInText=f,r.getScheduledDeadlineDateDay=function(h){return h.getFullYear()+"-"+(h.getMonth()+1)+"-"+h.getDate()+" "+f(h).substring(0,3)},r.getScheduledDeadlineDateDayTime=function(h){return h.getFullYear()+"-"+(h.getMonth()+1)+"-"+h.getDate()+" "+f(h).substring(0,3)+" "+h.toTimeString().substring(0,5)},r.getYYMMDDTHHMMFormat=function(h){return[h.getFullYear(),("0"+(h.getMonth()+1)).slice(-2),("0"+h.getDate()).slice(-2)].join("-")+"T"+h.toTimeString().substring(0,5)},r.getYYYMMDD=function(h){return[h.getFullYear(),("0"+(h.getMonth()+1)).slice(-2),("0"+h.getDate()).slice(-2)].join("")}})});var Rt=gt(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.parseEDNString=Ft.EDNListParser=void 0;var at;(function(r){r[r.idle=0]="idle",r[r.string=1]="string",r[r.escape=2]="escape",r[r.comment=3]="comment"})(at||(at={}));var et;(function(r){r[r.vector=0]="vector",r[r.list=1]="list",r[r.map=2]="map",r[r.set=3]="set",r[r.tag=4]="tag"})(et||(et={}));var ye={t:"	",r:"\r",n:`
`,"\\":"\\",'"':'"'},pe=[","," ","	",`
`,"\r"],ge=/^[-+]?(0|[1-9][0-9]*)$/,ve=/^[-+]?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?(0|[1-9][0-9]*))?M?$/,me={inst:r=>{if(typeof r!="string")throw new Error("#inst value must be a string");return new Date(r)}},Ot=class{constructor({mapAs:o="doubleArray",setAs:f="object",keywordAs:h="object",charAs:d="object",listAs:C="object",tagHandlers:L={}}={}){this.stack=[],this.mode=at.idle,this.state="",this.started=!1,this.done=!1,this.mapAs=o,this.setAs=f,this.keywordAs=h,this.charAs=d,this.listAs=C,this.tagHandlers={...me,...L}}updateStack(){if(this.stack.length===0||this.result===void 0)return;let[o,f]=this.stack[this.stack.length-1];if(o===et.vector)f.push(this.result);else if(o===et.list)f.push(this.result);else if(o===et.set)f.push(this.result);else if(o===et.map)f[1].length>0?f[0].push([f[1].pop(),this.result]):f[1].push(this.result);else if(o===et.tag){if(this.stack.pop(),f==="_")this.result=void 0;else{let h=this.tagHandlers[f];h?this.result=h(this.result):this.result={tag:f,val:this.result}}this.updateStack();return}this.result=void 0}match(){if(this.state==="nil")this.result=null;else if(this.state==="true")this.result=!0;else if(this.state==="false")this.result=!1;else if(this.state[0]===":")this.result=this.keywordAs==="string"?this.state.substr(1):{key:this.state.substr(1)};else if(this.state[0]==="#")this.stack.push([et.tag,this.state.substr(1)]),this.result=void 0;else if(ge.test(this.state))this.result=parseInt(this.state,10);else if(ve.test(this.state))this.result=parseFloat(this.state);else if(this.state[0]==="\\"){let o;this.state==="\\space"?o=" ":this.state==="\\newline"?o=`
`:this.state==="\\return"?o="\r":this.state==="\\tab"?o="	":this.state==="\\\\"?o="\\":o=this.state.substr(1),this.charAs==="string"?this.result=o:this.result={char:o}}else this.state!==""&&(this.result={sym:this.state});this.state=""}next(o){let f=[];for(let h=0;h<o.length;h++){this.stack.length===0&&this.result!==void 0&&(f.push(this.result),this.result=void 0);let d=o[h];if(this.mode===at.idle){if(d==='"'){this.match(),this.updateStack(),this.mode=at.string,this.state="";continue}if(d===";"){this.mode=at.comment;continue}if(pe.includes(d)){this.match(),this.updateStack();continue}if(d==="}"){if(this.match(),this.updateStack(),this.stack.length!==0){let[L,m]=this.stack.pop();L===et.map?this.mapAs==="object"?this.result=m[0].reduce((J,[B,q])=>({...J,[B]:q}),{}):this.mapAs==="map"?this.result=new Map(m[0]):this.result={map:m[0]}:this.setAs==="array"?this.result=m:this.setAs==="set"?this.result=new Set(m):this.result={set:m}}this.updateStack();continue}if(d==="]"){this.match(),this.updateStack();let[L,m]=this.stack.pop();this.result=m,this.updateStack();continue}if(d===")"){if(this.match(),this.updateStack(),this.stack.length===0)return this.result!==void 0&&f.push(this.result),this.done=!0,f;let[L,m]=this.stack.pop();this.listAs==="array"?this.result=m:this.result={list:m},this.updateStack();continue}if(d==="["){this.match(),this.updateStack(),this.stack.push([et.vector,[]]);continue}else if(d==="("){if(!this.started){this.started=!0;continue}this.match(),this.updateStack(),this.stack.push([et.list,[]]);continue}let C=this.state+d;if(C==="#_"){this.stack.push([et.tag,d]),this.result=void 0,this.state="";continue}if(C.endsWith("#{")){this.state=this.state.slice(0,-1),this.match(),this.updateStack(),this.stack.push([et.set,[]]),this.state="";continue}if(d==="{"){this.match(),this.updateStack(),this.stack.push([et.map,[[],[]]]),this.state="";continue}this.state+=d;continue}else if(this.mode===at.string){if(d==="\\"){this.stack.push([this.mode,this.state]),this.mode=at.escape,this.state="";continue}if(d==='"'){this.mode=at.idle,this.result=this.state,this.updateStack(),this.state="";continue}this.state+=d}else if(this.mode===at.escape){let C=ye[d],[L,m]=this.stack.pop();this.mode=L,this.state=m+C}else this.mode===at.comment&&d===`
`&&(this.mode=at.idle)}return f}isDone(){return this.done}};Ft.EDNListParser=Ot;Ft.parseEDNString=(r,o)=>{let f=new Ot(o),[h]=f.next("("+r+")");return h===void 0?null:h}});var Vt=gt(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.toEDNStringFromSimpleObject=W.toEDNString=W.toSymbol=W.toKeyword=W.tagValue=void 0;var Se=r=>r.key!==void 0,Fe=r=>r.sym!==void 0,we=r=>r.map!==void 0,Me=r=>r.set!==void 0,Ee=r=>r.list!==void 0,De=r=>r.tag!==void 0,$e=r=>r.char!==void 0;W.tagValue=(r,o)=>({tag:r,val:o});W.toKeyword=r=>({key:r});W.toSymbol=r=>({sym:r});W.toEDNString=r=>{if(typeof r=="string")return JSON.stringify(r);if(Array.isArray(r))return`[${r.map(W.toEDNString).join(" ")}]`;if(typeof r=="number")return r.toString();if(typeof r=="boolean")return JSON.stringify(r);if(r===null)return"nil";if(r instanceof Date)return`#inst "${r.toISOString()}"`;if(typeof r=="bigint")return`${r}N`;if(r instanceof Map)return`{${[...r].map(([o,f])=>`${W.toEDNString(o)} ${W.toEDNString(f)}`).join(" ")}}`;if(r instanceof Set)return`#{${[...r].map(W.toEDNString).join(" ")}}`;if(we(r))return`{${r.map.map(([o,f])=>`${W.toEDNString(o)} ${W.toEDNString(f)}`).join(" ")}}`;if(Me(r))return`#{${r.set.map(W.toEDNString).join(" ")}}`;if(Se(r))return`:${r.key}`;if(Fe(r))return r.sym;if(Ee(r))return`(${r.list.map(W.toEDNString).join(" ")})`;if(De(r))return`#${r.tag} ${W.toEDNString(r.val)}`;if($e(r))return`\\${r.char}`;throw new TypeError(`Unknown type: ${JSON.stringify(r)}`)};W.toEDNStringFromSimpleObject=(r,o={keysAs:"keyword"})=>{if(typeof r=="string")return JSON.stringify(r);if(Array.isArray(r))return`[${r.map(f=>W.toEDNStringFromSimpleObject(f,o)).join(" ")}]`;if(typeof r=="number")return r.toString();if(typeof r=="boolean")return JSON.stringify(r);if(r===null)return"nil";if(r instanceof Date)return`#inst "${r.toISOString()}"`;if(typeof r=="bigint")return`${r}N`;if(r instanceof Map)return`{${[...r].map(([f,h])=>`${W.toEDNStringFromSimpleObject(f,o)} ${W.toEDNStringFromSimpleObject(h,o)}`).join(" ")}}`;if(r instanceof Set)return`#{${[...r].map(f=>W.toEDNStringFromSimpleObject(f,o)).join(" ")}}`;if(typeof r=="object")return`{${Object.entries(r).map(([f,h])=>`${o.keysAs==="string"?JSON.stringify(f):`:${f}`} ${W.toEDNStringFromSimpleObject(h,o)}`).join(" ")}}`;throw new TypeError(`Unknown type: ${JSON.stringify(r)}`)}});var Gt=gt(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var xe=Rt();Object.defineProperty(ht,"parseEDNString",{enumerable:!0,get:function(){return xe.parseEDNString}});var Dt=Vt();Object.defineProperty(ht,"toEDNString",{enumerable:!0,get:function(){return Dt.toEDNString}});Object.defineProperty(ht,"toEDNStringFromSimpleObject",{enumerable:!0,get:function(){return Dt.toEDNStringFromSimpleObject}});Object.defineProperty(ht,"tagValue",{enumerable:!0,get:function(){return Dt.tagValue}});Object.defineProperty(ht,"toKeyword",{enumerable:!0,get:function(){return Dt.toKeyword}});Object.defineProperty(ht,"toSymbol",{enumerable:!0,get:function(){return Dt.toSymbol}})});var Kt=gt((jt,Pt)=>{(function(r,o){typeof jt=="object"&&typeof Pt<"u"?Pt.exports=o():typeof define=="function"&&define.amd?define(o):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=o()})(jt,function(){"use strict";var r=1e3,o=6e4,f=36e5,h="millisecond",d="second",C="minute",L="hour",m="day",J="week",B="month",q="quarter",_="year",X="date",ot="Invalid Date",Q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,yt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Lt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var g=["th","st","nd","rd"],y=$%100;return"["+$+(g[(y-20)%10]||g[y]||g[0])+"]"}},Et=function($,g,y){var S=String($);return!S||S.length>=g?$:""+Array(g+1-S.length).join(y)+$},xt={s:Et,z:function($){var g=-$.utcOffset(),y=Math.abs(g),S=Math.floor(y/60),p=y%60;return(g<=0?"+":"-")+Et(S,2,"0")+":"+Et(p,2,"0")},m:function $(g,y){if(g.date()<y.date())return-$(y,g);var S=12*(y.year()-g.year())+(y.month()-g.month()),p=g.clone().add(S,B),x=y-p<0,b=g.clone().add(S+(x?-1:1),B);return+(-(S+(y-p)/(x?p-b:b-p))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:B,y:_,w:J,d:m,D:X,h:L,m:C,s:d,ms:h,Q:q}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},lt="en",ut={};ut[lt]=Lt;var ct="$isDayjsObject",pt=function($){return $ instanceof ft||!(!$||!$[ct])},St=function $(g,y,S){var p;if(!g)return lt;if(typeof g=="string"){var x=g.toLowerCase();ut[x]&&(p=x),y&&(ut[x]=y,p=x);var b=g.split("-");if(!p&&b.length>1)return $(b[0])}else{var P=g.name;ut[P]=g,p=P}return!S&&p&&(lt=p),p||!S&&lt},V=function($,g){if(pt($))return $.clone();var y=typeof g=="object"?g:{};return y.date=$,y.args=arguments,new ft(y)},j=xt;j.l=St,j.i=pt,j.w=function($,g){return V($,{locale:g.$L,utc:g.$u,x:g.$x,$offset:g.$offset})};var ft=function(){function $(y){this.$L=St(y.locale,null,!0),this.parse(y),this.$x=this.$x||y.x||{},this[ct]=!0}var g=$.prototype;return g.parse=function(y){this.$d=function(S){var p=S.date,x=S.utc;if(p===null)return new Date(NaN);if(j.u(p))return new Date;if(p instanceof Date)return new Date(p);if(typeof p=="string"&&!/Z$/i.test(p)){var b=p.match(Q);if(b){var P=b[2]-1||0,I=(b[7]||"0").substring(0,3);return x?new Date(Date.UTC(b[1],P,b[3]||1,b[4]||0,b[5]||0,b[6]||0,I)):new Date(b[1],P,b[3]||1,b[4]||0,b[5]||0,b[6]||0,I)}}return new Date(p)}(y),this.init()},g.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},g.$utils=function(){return j},g.isValid=function(){return this.$d.toString()!==ot},g.isSame=function(y,S){var p=V(y);return this.startOf(S)<=p&&p<=this.endOf(S)},g.isAfter=function(y,S){return V(y)<this.startOf(S)},g.isBefore=function(y,S){return this.endOf(S)<V(y)},g.$g=function(y,S,p){return j.u(y)?this[S]:this.set(p,y)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(y,S){var p=this,x=!!j.u(S)||S,b=j.p(y),P=function(s,u){var l=j.w(p.$u?Date.UTC(p.$y,u,s):new Date(p.$y,u,s),p);return x?l:l.endOf(m)},I=function(s,u){return j.w(p.toDate()[s].apply(p.toDate("s"),(x?[0,0,0,0]:[23,59,59,999]).slice(u)),p)},G=this.$W,n=this.$M,t=this.$D,e="set"+(this.$u?"UTC":"");switch(b){case _:return x?P(1,0):P(31,11);case B:return x?P(1,n):P(0,n+1);case J:var i=this.$locale().weekStart||0,a=(G<i?G+7:G)-i;return P(x?t-a:t+(6-a),n);case m:case X:return I(e+"Hours",0);case L:return I(e+"Minutes",1);case C:return I(e+"Seconds",2);case d:return I(e+"Milliseconds",3);default:return this.clone()}},g.endOf=function(y){return this.startOf(y,!1)},g.$set=function(y,S){var p,x=j.p(y),b="set"+(this.$u?"UTC":""),P=(p={},p[m]=b+"Date",p[X]=b+"Date",p[B]=b+"Month",p[_]=b+"FullYear",p[L]=b+"Hours",p[C]=b+"Minutes",p[d]=b+"Seconds",p[h]=b+"Milliseconds",p)[x],I=x===m?this.$D+(S-this.$W):S;if(x===B||x===_){var G=this.clone().set(X,1);G.$d[P](I),G.init(),this.$d=G.set(X,Math.min(this.$D,G.daysInMonth())).$d}else P&&this.$d[P](I);return this.init(),this},g.set=function(y,S){return this.clone().$set(y,S)},g.get=function(y){return this[j.p(y)]()},g.add=function(y,S){var p,x=this;y=Number(y);var b=j.p(S),P=function(n){var t=V(x);return j.w(t.date(t.date()+Math.round(n*y)),x)};if(b===B)return this.set(B,this.$M+y);if(b===_)return this.set(_,this.$y+y);if(b===m)return P(1);if(b===J)return P(7);var I=(p={},p[C]=o,p[L]=f,p[d]=r,p)[b]||1,G=this.$d.getTime()+y*I;return j.w(G,this)},g.subtract=function(y,S){return this.add(-1*y,S)},g.format=function(y){var S=this,p=this.$locale();if(!this.isValid())return p.invalidDate||ot;var x=y||"YYYY-MM-DDTHH:mm:ssZ",b=j.z(this),P=this.$H,I=this.$m,G=this.$M,n=p.weekdays,t=p.months,e=p.meridiem,i=function(u,l,c,v){return u&&(u[l]||u(S,x))||c[l].slice(0,v)},a=function(u){return j.s(P%12||12,u,"0")},s=e||function(u,l,c){var v=u<12?"AM":"PM";return c?v.toLowerCase():v};return x.replace(yt,function(u,l){return l||function(c){switch(c){case"YY":return String(S.$y).slice(-2);case"YYYY":return j.s(S.$y,4,"0");case"M":return G+1;case"MM":return j.s(G+1,2,"0");case"MMM":return i(p.monthsShort,G,t,3);case"MMMM":return i(t,G);case"D":return S.$D;case"DD":return j.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return i(p.weekdaysMin,S.$W,n,2);case"ddd":return i(p.weekdaysShort,S.$W,n,3);case"dddd":return n[S.$W];case"H":return String(P);case"HH":return j.s(P,2,"0");case"h":return a(1);case"hh":return a(2);case"a":return s(P,I,!0);case"A":return s(P,I,!1);case"m":return String(I);case"mm":return j.s(I,2,"0");case"s":return String(S.$s);case"ss":return j.s(S.$s,2,"0");case"SSS":return j.s(S.$ms,3,"0");case"Z":return b}return null}(u)||b.replace(":","")})},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(y,S,p){var x,b=this,P=j.p(S),I=V(y),G=(I.utcOffset()-this.utcOffset())*o,n=this-I,t=function(){return j.m(b,I)};switch(P){case _:x=t()/12;break;case B:x=t();break;case q:x=t()/3;break;case J:x=(n-G)/6048e5;break;case m:x=(n-G)/864e5;break;case L:x=n/f;break;case C:x=n/o;break;case d:x=n/r;break;default:x=n}return p?x:j.a(x)},g.daysInMonth=function(){return this.endOf(B).$D},g.$locale=function(){return ut[this.$L]},g.locale=function(y,S){if(!y)return this.$L;var p=this.clone(),x=St(y,S,!0);return x&&(p.$L=x),p},g.clone=function(){return j.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},$}(),At=ft.prototype;return V.prototype=At,[["$ms",h],["$s",d],["$m",C],["$H",L],["$W",m],["$M",B],["$y",_],["$D",X]].forEach(function($){At[$[1]]=function(g){return this.$g(g,$[0],$[1])}}),V.extend=function($,g){return $.$i||($(g,ft,V),$.$i=!0),V},V.locale=St,V.isDayjs=pt,V.unix=function($){return V(1e3*$)},V.en=ut[lt],V.Ls=ut,V.p={},V})});var Zt=gt((Ye,_t)=>{"use strict";var Ae=require("os"),Qt=Ae.homedir();_t.exports=r=>{if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);return Qt?r.replace(/^~(?=$|\/|\\)/,Qt):r}});var Ne={};he(Ne,{default:()=>ae});module.exports=de(Ne);var nt=require("@raycast/api"),mt=require("react"),ie=vt(Ht()),se=require("@raycast/api");var Mt=require("@raycast/api"),be=vt(Ut()),qt=vt(Gt()),Bt=vt(require("path")),Ce=vt(Kt()),kt=vt(require("fs")),Xt=vt(Zt());var Oe=r=>kt.default.promises.lstat(r).then(o=>{if(!o.isDirectory())throw`Folder does not exist: ${r}`}).catch(o=>{throw o.code==="ENOENT"?`Folder does not exist: ${r}`:"Error"}),wt=()=>(0,Xt.default)((0,Mt.getPreferenceValues)().graphPath),te=()=>Oe(wt()),ke=()=>{let r=Bt.default.join(wt(),"/logseq/config.edn");return kt.default.promises.readFile(r,{encoding:"utf8"}).then(o=>(0,qt.parseEDNString)(o.toString(),{mapAs:"object",keywordAs:"string"}))},ee=()=>ke().then(r=>r["preferred-format"]||"md");var re=()=>{(0,Mt.showToast)({style:Mt.Toast.Style.Failure,title:"Logseq graph path is invalid",message:"Update the path and try again."})};var ne=async r=>kt.default.promises.readdir(r).then(o=>o.map(f=>Bt.default.join(r,f))),$t=r=>{let o=r.split("/");return o[o.length-1]},It=r=>{let o=wt().split("/")[wt().split("/").length-1],f=r.split("/")[r.split("/").length-1];return encodeURI(`logseq://graph/${o}?page=${f}`)};var dt=require("react/jsx-runtime");function ae(){let{state:r,search:o}=ze();return(0,mt.useEffect)(()=>{te().catch(f=>{throw re(),"Folder Does not Exist"})},[o]),(0,dt.jsx)(nt.List,{isLoading:r.isLoading,onSearchTextChange:o,searchBarPlaceholder:"Search Logseq Database...",throttle:!0,children:(0,dt.jsx)(nt.List.Section,{title:"Results",subtitle:r.results.length+"",children:r.results.map(f=>(0,dt.jsx)(Le,{searchResult:f},f.name))})})}function Le({searchResult:r}){return console.log(r.url),(0,dt.jsx)(nt.List.Item,{title:r.name,subtitle:r.description,actions:(0,dt.jsx)(nt.ActionPanel,{children:(0,dt.jsx)(nt.ActionPanel.Section,{children:(0,dt.jsx)(nt.Action.OpenInBrowser,{title:"Open in Logseq",url:r.url})})})})}function ze(){let[r,o]=(0,mt.useState)({results:[],isLoading:!0}),f=(0,mt.useCallback)(async function(d){o(C=>({...C,isLoading:!0}));try{let C=await Te(d);o(L=>({...L,results:C,isLoading:!1}))}catch(C){o(L=>({...L,isLoading:!1})),console.error("search error",C),(0,nt.showToast)({style:nt.Toast.Style.Failure,title:"Could not perform search",message:String(C)})}},[o]);return(0,mt.useEffect)(()=>{f("")},[]),{state:r,search:f}}async function Te(r){let o=await ee().then(h=>`.${h}`),f=[];return await ne(wt()+"/pages").then(h=>{if((0,se.getPreferenceValues)().smartSearch==!0&&r.length>0){let d=[];h.forEach(m=>{m.endsWith(o)&&d.push({name:$t(m).replace(o,""),description:$t(m),url:It(m).replace(o,"")})});let C=new ie.default({fields:["name"],storeFields:["name","url"],idField:"name"});C.addAll(d);let L=C.search(r);for(let m in L)f.push({name:L[m].name,description:L[m].name+o,url:L[m].url})}else h.forEach(d=>{d.endsWith(o)&&d.toLowerCase().includes(r.toLowerCase())&&f.push({name:$t(d).replace(o,""),description:$t(d),url:It(d).replace(o,"")})})}),f}
/*! Bundled license information:

minisearch/dist/umd/index.js:
  (*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** *)
*/
