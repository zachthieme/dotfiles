"use strict";var vt=Object.create;var X=Object.defineProperty;var Yt=Object.getOwnPropertyDescriptor;var Pt=Object.getOwnPropertyNames;var Ht=Object.getPrototypeOf,Lt=Object.prototype.hasOwnProperty;var U=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Jt=(t,e)=>{for(var a in e)X(t,a,{get:e[a],enumerable:!0})},ht=(t,e,a,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Pt(e))!Lt.call(t,r)&&r!==a&&X(t,r,{get:()=>e[r],enumerable:!(n=Yt(e,r))||n.enumerable});return t};var I=(t,e,a)=>(a=t!=null?vt(Ht(t)):{},ht(e||!t||!t.__esModule?X(a,"default",{value:t,enumerable:!0}):a,t)),Ut=t=>ht(X({},"__esModule",{value:!0}),t);var ft=U((tt,dt)=>{(function(t,e){typeof tt=="object"&&typeof dt<"u"?e(tt):typeof define=="function"&&define.amd?define(["exports"],e):e((t||self).logseqDateutils={})})(tt,function(t){var e=function(n){return n+(n>0?["th","st","nd","rd"][n>3&&n<21||n%10>3?0:n%10]:"")},a=function(n){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][n.getDay()]};t.getDateForPage=function(n,r){var g=n.getFullYear(),m=n.toString().substring(4,7),f=n.getMonth()+1,S=n.getDate(),D=n.toLocaleString("default",{month:"long"});if(r==="MMM do yyyy")return"[["+m+" "+e(S)+", "+g+"]]";if(r.includes("yyyy")&&(r.includes("MM")||r.includes("MMM"))&&r.includes("dd")&&(r.includes("EEEE")||r.includes("EEE")||r.includes("E"))){var j=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],F={yyyy:g,dd:("0"+S).slice(-2),MM:("0"+f).slice(-2),MMMM:D,EEEE:j[n.getDay()],EEE:j[n.getDay()].substring(0,3),E:j[n.getDay()].substring(0,1)};return"[["+r.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,function(O){return F[O]})+"]]"}if(r==="do MMMM yyyy"||r==="MMMM do, yyyy"){var x={yyyy:g,do:e(S),MMMM:D};return"[["+r.replace(/yyyy|do|MMMM/gi,function(O){return x[O]})+"]]"}if(r.includes("yyyy")&&r.includes("MM")&&r.includes("dd")){var L={yyyy:g,dd:("0"+S).slice(-2),MM:("0"+f).slice(-2)};return"[["+r.replace(/yyyy|dd|MM/gi,function(O){return L[O]})+"]]"}return"[["+m+" "+e(S)+", "+g+"]]"},t.getDateForPageWithoutBrackets=function(n,r){var g=n.getFullYear(),m=n.toString().substring(4,7),f=n.getMonth()+1,S=n.getDate(),D=n.toLocaleString("default",{month:"long"});if(r==="MMM do yyyy")return m+" "+e(S)+", "+g;if(r.includes("yyyy")&&r.includes("MM")&&r.includes("dd")&&(r.includes("EEEE")||r.includes("EEE")||r.includes("E"))){var j=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],F={yyyy:g,dd:("0"+S).slice(-2),MM:("0"+f).slice(-2),EEEE:j[n.getDay()],EEE:j[n.getDay()].substring(0,3),E:j[n.getDay()].substring(0,1)};return""+r.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,function(O){return F[O]})}if(r==="do MMMM yyyy"||r==="MMMM do, yyyy"){var x={yyyy:g,do:e(S),MMMM:D};return""+r.replace(/yyyy|do|MMMM/gi,function(O){return x[O]})}if(r.includes("yyyy")&&r.includes("MM")&&r.includes("dd")){var L={yyyy:g,dd:("0"+S).slice(-2),MM:("0"+f).slice(-2)};return""+r.replace(/yyyy|dd|MM/gi,function(O){return L[O]})}return r==="MMMM do, yyyy"?n.toLocaleString("default",{month:"long"})+" "+e(S)+", "+g:r==="do MMM yyyy"?e(S)+" "+m+" "+g:m+" "+e(S)+", "+g},t.getDayInText=a,t.getScheduledDeadlineDateDay=function(n){return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+a(n).substring(0,3)},t.getScheduledDeadlineDateDayTime=function(n){return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+a(n).substring(0,3)+" "+n.toTimeString().substring(0,5)},t.getYYMMDDTHHMMFormat=function(n){return[n.getFullYear(),("0"+(n.getMonth()+1)).slice(-2),("0"+n.getDate()).slice(-2)].join("-")+"T"+n.toTimeString().substring(0,5)},t.getYYYMMDD=function(n){return[n.getFullYear(),("0"+(n.getMonth()+1)).slice(-2),("0"+n.getDate()).slice(-2)].join("")}})});var lt=U(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.parseEDNString=W.EDNListParser=void 0;var A;(function(t){t[t.idle=0]="idle",t[t.string=1]="string",t[t.escape=2]="escape",t[t.comment=3]="comment"})(A||(A={}));var N;(function(t){t[t.vector=0]="vector",t[t.list=1]="list",t[t.map=2]="map",t[t.set=3]="set",t[t.tag=4]="tag"})(N||(N={}));var It={t:"	",r:"\r",n:`
`,"\\":"\\",'"':'"'},Wt=[","," ","	",`
`,"\r"],qt=/^[-+]?(0|[1-9][0-9]*)$/,Vt=/^[-+]?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?(0|[1-9][0-9]*))?M?$/,Rt={inst:t=>{if(typeof t!="string")throw new Error("#inst value must be a string");return new Date(t)}},et=class{constructor({mapAs:e="doubleArray",setAs:a="object",keywordAs:n="object",charAs:r="object",listAs:g="object",tagHandlers:m={}}={}){this.stack=[],this.mode=A.idle,this.state="",this.started=!1,this.done=!1,this.mapAs=e,this.setAs=a,this.keywordAs=n,this.charAs=r,this.listAs=g,this.tagHandlers={...Rt,...m}}updateStack(){if(this.stack.length===0||this.result===void 0)return;let[e,a]=this.stack[this.stack.length-1];if(e===N.vector)a.push(this.result);else if(e===N.list)a.push(this.result);else if(e===N.set)a.push(this.result);else if(e===N.map)a[1].length>0?a[0].push([a[1].pop(),this.result]):a[1].push(this.result);else if(e===N.tag){if(this.stack.pop(),a==="_")this.result=void 0;else{let n=this.tagHandlers[a];n?this.result=n(this.result):this.result={tag:a,val:this.result}}this.updateStack();return}this.result=void 0}match(){if(this.state==="nil")this.result=null;else if(this.state==="true")this.result=!0;else if(this.state==="false")this.result=!1;else if(this.state[0]===":")this.result=this.keywordAs==="string"?this.state.substr(1):{key:this.state.substr(1)};else if(this.state[0]==="#")this.stack.push([N.tag,this.state.substr(1)]),this.result=void 0;else if(qt.test(this.state))this.result=parseInt(this.state,10);else if(Vt.test(this.state))this.result=parseFloat(this.state);else if(this.state[0]==="\\"){let e;this.state==="\\space"?e=" ":this.state==="\\newline"?e=`
`:this.state==="\\return"?e="\r":this.state==="\\tab"?e="	":this.state==="\\\\"?e="\\":e=this.state.substr(1),this.charAs==="string"?this.result=e:this.result={char:e}}else this.state!==""&&(this.result={sym:this.state});this.state=""}next(e){let a=[];for(let n=0;n<e.length;n++){this.stack.length===0&&this.result!==void 0&&(a.push(this.result),this.result=void 0);let r=e[n];if(this.mode===A.idle){if(r==='"'){this.match(),this.updateStack(),this.mode=A.string,this.state="";continue}if(r===";"){this.mode=A.comment;continue}if(Wt.includes(r)){this.match(),this.updateStack();continue}if(r==="}"){if(this.match(),this.updateStack(),this.stack.length!==0){let[m,f]=this.stack.pop();m===N.map?this.mapAs==="object"?this.result=f[0].reduce((S,[D,j])=>({...S,[D]:j}),{}):this.mapAs==="map"?this.result=new Map(f[0]):this.result={map:f[0]}:this.setAs==="array"?this.result=f:this.setAs==="set"?this.result=new Set(f):this.result={set:f}}this.updateStack();continue}if(r==="]"){this.match(),this.updateStack();let[m,f]=this.stack.pop();this.result=f,this.updateStack();continue}if(r===")"){if(this.match(),this.updateStack(),this.stack.length===0)return this.result!==void 0&&a.push(this.result),this.done=!0,a;let[m,f]=this.stack.pop();this.listAs==="array"?this.result=f:this.result={list:f},this.updateStack();continue}if(r==="["){this.match(),this.updateStack(),this.stack.push([N.vector,[]]);continue}else if(r==="("){if(!this.started){this.started=!0;continue}this.match(),this.updateStack(),this.stack.push([N.list,[]]);continue}let g=this.state+r;if(g==="#_"){this.stack.push([N.tag,r]),this.result=void 0,this.state="";continue}if(g.endsWith("#{")){this.state=this.state.slice(0,-1),this.match(),this.updateStack(),this.stack.push([N.set,[]]),this.state="";continue}if(r==="{"){this.match(),this.updateStack(),this.stack.push([N.map,[[],[]]]),this.state="";continue}this.state+=r;continue}else if(this.mode===A.string){if(r==="\\"){this.stack.push([this.mode,this.state]),this.mode=A.escape,this.state="";continue}if(r==='"'){this.mode=A.idle,this.result=this.state,this.updateStack(),this.state="";continue}this.state+=r}else if(this.mode===A.escape){let g=It[r],[m,f]=this.stack.pop();this.mode=m,this.state=f+g}else this.mode===A.comment&&r===`
`&&(this.mode=A.idle)}return a}isDone(){return this.done}};W.EDNListParser=et;W.parseEDNString=(t,e)=>{let a=new et(e),[n]=a.next("("+t+")");return n===void 0?null:n}});var gt=U(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.toEDNStringFromSimpleObject=y.toEDNString=y.toSymbol=y.toKeyword=y.tagValue=void 0;var Gt=t=>t.key!==void 0,Kt=t=>t.sym!==void 0,Zt=t=>t.map!==void 0,zt=t=>t.set!==void 0,Bt=t=>t.list!==void 0,Qt=t=>t.tag!==void 0,Xt=t=>t.char!==void 0;y.tagValue=(t,e)=>({tag:t,val:e});y.toKeyword=t=>({key:t});y.toSymbol=t=>({sym:t});y.toEDNString=t=>{if(typeof t=="string")return JSON.stringify(t);if(Array.isArray(t))return`[${t.map(y.toEDNString).join(" ")}]`;if(typeof t=="number")return t.toString();if(typeof t=="boolean")return JSON.stringify(t);if(t===null)return"nil";if(t instanceof Date)return`#inst "${t.toISOString()}"`;if(typeof t=="bigint")return`${t}N`;if(t instanceof Map)return`{${[...t].map(([e,a])=>`${y.toEDNString(e)} ${y.toEDNString(a)}`).join(" ")}}`;if(t instanceof Set)return`#{${[...t].map(y.toEDNString).join(" ")}}`;if(Zt(t))return`{${t.map.map(([e,a])=>`${y.toEDNString(e)} ${y.toEDNString(a)}`).join(" ")}}`;if(zt(t))return`#{${t.set.map(y.toEDNString).join(" ")}}`;if(Gt(t))return`:${t.key}`;if(Kt(t))return t.sym;if(Bt(t))return`(${t.list.map(y.toEDNString).join(" ")})`;if(Qt(t))return`#${t.tag} ${y.toEDNString(t.val)}`;if(Xt(t))return`\\${t.char}`;throw new TypeError(`Unknown type: ${JSON.stringify(t)}`)};y.toEDNStringFromSimpleObject=(t,e={keysAs:"keyword"})=>{if(typeof t=="string")return JSON.stringify(t);if(Array.isArray(t))return`[${t.map(a=>y.toEDNStringFromSimpleObject(a,e)).join(" ")}]`;if(typeof t=="number")return t.toString();if(typeof t=="boolean")return JSON.stringify(t);if(t===null)return"nil";if(t instanceof Date)return`#inst "${t.toISOString()}"`;if(typeof t=="bigint")return`${t}N`;if(t instanceof Map)return`{${[...t].map(([a,n])=>`${y.toEDNStringFromSimpleObject(a,e)} ${y.toEDNStringFromSimpleObject(n,e)}`).join(" ")}}`;if(t instanceof Set)return`#{${[...t].map(a=>y.toEDNStringFromSimpleObject(a,e)).join(" ")}}`;if(typeof t=="object")return`{${Object.entries(t).map(([a,n])=>`${e.keysAs==="string"?JSON.stringify(a):`:${a}`} ${y.toEDNStringFromSimpleObject(n,e)}`).join(" ")}}`;throw new TypeError(`Unknown type: ${JSON.stringify(t)}`)}});var pt=U(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var te=lt();Object.defineProperty(_,"parseEDNString",{enumerable:!0,get:function(){return te.parseEDNString}});var K=gt();Object.defineProperty(_,"toEDNString",{enumerable:!0,get:function(){return K.toEDNString}});Object.defineProperty(_,"toEDNStringFromSimpleObject",{enumerable:!0,get:function(){return K.toEDNStringFromSimpleObject}});Object.defineProperty(_,"tagValue",{enumerable:!0,get:function(){return K.tagValue}});Object.defineProperty(_,"toKeyword",{enumerable:!0,get:function(){return K.toKeyword}});Object.defineProperty(_,"toSymbol",{enumerable:!0,get:function(){return K.toSymbol}})});var yt=U((it,ot)=>{(function(t,e){typeof it=="object"&&typeof ot<"u"?ot.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).dayjs=e()})(it,function(){"use strict";var t=1e3,e=6e4,a=36e5,n="millisecond",r="second",g="minute",m="hour",f="day",S="week",D="month",j="quarter",F="year",x="date",L="Invalid Date",O=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,xt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Ct={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(c){var o=["th","st","nd","rd"],s=c%100;return"["+c+(o[(s-20)%10]||o[s]||o[0])+"]"}},rt=function(c,o,s){var u=String(c);return!u||u.length>=o?c:""+Array(o+1-u.length).join(s)+c},_t={s:rt,z:function(c){var o=-c.utcOffset(),s=Math.abs(o),u=Math.floor(s/60),i=s%60;return(o<=0?"+":"-")+rt(u,2,"0")+":"+rt(i,2,"0")},m:function c(o,s){if(o.date()<s.date())return-c(s,o);var u=12*(s.year()-o.year())+(s.month()-o.month()),i=o.clone().add(u,D),h=s-i<0,d=o.clone().add(u+(h?-1:1),D);return+(-(u+(s-i)/(h?i-d:d-i))||0)},a:function(c){return c<0?Math.ceil(c)||0:Math.floor(c)},p:function(c){return{M:D,y:F,w:S,d:f,D:x,h:m,m:g,s:r,ms:n,Q:j}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(c){return c===void 0}},V="en",Y={};Y[V]=Ct;var ut="$isDayjsObject",st=function(c){return c instanceof B||!(!c||!c[ut])},z=function c(o,s,u){var i;if(!o)return V;if(typeof o=="string"){var h=o.toLowerCase();Y[h]&&(i=h),s&&(Y[h]=s,i=h);var d=o.split("-");if(!i&&d.length>1)return c(d[0])}else{var p=o.name;Y[p]=o,i=p}return!u&&i&&(V=i),i||!u&&V},E=function(c,o){if(st(c))return c.clone();var s=typeof o=="object"?o:{};return s.date=c,s.args=arguments,new B(s)},l=_t;l.l=z,l.i=st,l.w=function(c,o){return E(c,{locale:o.$L,utc:o.$u,x:o.$x,$offset:o.$offset})};var B=function(){function c(s){this.$L=z(s.locale,null,!0),this.parse(s),this.$x=this.$x||s.x||{},this[ut]=!0}var o=c.prototype;return o.parse=function(s){this.$d=function(u){var i=u.date,h=u.utc;if(i===null)return new Date(NaN);if(l.u(i))return new Date;if(i instanceof Date)return new Date(i);if(typeof i=="string"&&!/Z$/i.test(i)){var d=i.match(O);if(d){var p=d[2]-1||0,M=(d[7]||"0").substring(0,3);return h?new Date(Date.UTC(d[1],p,d[3]||1,d[4]||0,d[5]||0,d[6]||0,M)):new Date(d[1],p,d[3]||1,d[4]||0,d[5]||0,d[6]||0,M)}}return new Date(i)}(s),this.init()},o.init=function(){var s=this.$d;this.$y=s.getFullYear(),this.$M=s.getMonth(),this.$D=s.getDate(),this.$W=s.getDay(),this.$H=s.getHours(),this.$m=s.getMinutes(),this.$s=s.getSeconds(),this.$ms=s.getMilliseconds()},o.$utils=function(){return l},o.isValid=function(){return this.$d.toString()!==L},o.isSame=function(s,u){var i=E(s);return this.startOf(u)<=i&&i<=this.endOf(u)},o.isAfter=function(s,u){return E(s)<this.startOf(u)},o.isBefore=function(s,u){return this.endOf(u)<E(s)},o.$g=function(s,u,i){return l.u(s)?this[u]:this.set(i,s)},o.unix=function(){return Math.floor(this.valueOf()/1e3)},o.valueOf=function(){return this.$d.getTime()},o.startOf=function(s,u){var i=this,h=!!l.u(u)||u,d=l.p(s),p=function(H,k){var C=l.w(i.$u?Date.UTC(i.$y,k,H):new Date(i.$y,k,H),i);return h?C:C.endOf(f)},M=function(H,k){return l.w(i.toDate()[H].apply(i.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(k)),i)},b=this.$W,w=this.$M,T=this.$D,J="set"+(this.$u?"UTC":"");switch(d){case F:return h?p(1,0):p(31,11);case D:return h?p(1,w):p(0,w+1);case S:var P=this.$locale().weekStart||0,R=(b<P?b+7:b)-P;return p(h?T-R:T+(6-R),w);case f:case x:return M(J+"Hours",0);case m:return M(J+"Minutes",1);case g:return M(J+"Seconds",2);case r:return M(J+"Milliseconds",3);default:return this.clone()}},o.endOf=function(s){return this.startOf(s,!1)},o.$set=function(s,u){var i,h=l.p(s),d="set"+(this.$u?"UTC":""),p=(i={},i[f]=d+"Date",i[x]=d+"Date",i[D]=d+"Month",i[F]=d+"FullYear",i[m]=d+"Hours",i[g]=d+"Minutes",i[r]=d+"Seconds",i[n]=d+"Milliseconds",i)[h],M=h===f?this.$D+(u-this.$W):u;if(h===D||h===F){var b=this.clone().set(x,1);b.$d[p](M),b.init(),this.$d=b.set(x,Math.min(this.$D,b.daysInMonth())).$d}else p&&this.$d[p](M);return this.init(),this},o.set=function(s,u){return this.clone().$set(s,u)},o.get=function(s){return this[l.p(s)]()},o.add=function(s,u){var i,h=this;s=Number(s);var d=l.p(u),p=function(w){var T=E(h);return l.w(T.date(T.date()+Math.round(w*s)),h)};if(d===D)return this.set(D,this.$M+s);if(d===F)return this.set(F,this.$y+s);if(d===f)return p(1);if(d===S)return p(7);var M=(i={},i[g]=e,i[m]=a,i[r]=t,i)[d]||1,b=this.$d.getTime()+s*M;return l.w(b,this)},o.subtract=function(s,u){return this.add(-1*s,u)},o.format=function(s){var u=this,i=this.$locale();if(!this.isValid())return i.invalidDate||L;var h=s||"YYYY-MM-DDTHH:mm:ssZ",d=l.z(this),p=this.$H,M=this.$m,b=this.$M,w=i.weekdays,T=i.months,J=i.meridiem,P=function(k,C,G,Q){return k&&(k[C]||k(u,h))||G[C].slice(0,Q)},R=function(k){return l.s(p%12||12,k,"0")},H=J||function(k,C,G){var Q=k<12?"AM":"PM";return G?Q.toLowerCase():Q};return h.replace(xt,function(k,C){return C||function(G){switch(G){case"YY":return String(u.$y).slice(-2);case"YYYY":return l.s(u.$y,4,"0");case"M":return b+1;case"MM":return l.s(b+1,2,"0");case"MMM":return P(i.monthsShort,b,T,3);case"MMMM":return P(T,b);case"D":return u.$D;case"DD":return l.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return P(i.weekdaysMin,u.$W,w,2);case"ddd":return P(i.weekdaysShort,u.$W,w,3);case"dddd":return w[u.$W];case"H":return String(p);case"HH":return l.s(p,2,"0");case"h":return R(1);case"hh":return R(2);case"a":return H(p,M,!0);case"A":return H(p,M,!1);case"m":return String(M);case"mm":return l.s(M,2,"0");case"s":return String(u.$s);case"ss":return l.s(u.$s,2,"0");case"SSS":return l.s(u.$ms,3,"0");case"Z":return d}return null}(k)||d.replace(":","")})},o.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},o.diff=function(s,u,i){var h,d=this,p=l.p(u),M=E(s),b=(M.utcOffset()-this.utcOffset())*e,w=this-M,T=function(){return l.m(d,M)};switch(p){case F:h=T()/12;break;case D:h=T();break;case j:h=T()/3;break;case S:h=(w-b)/6048e5;break;case f:h=(w-b)/864e5;break;case m:h=w/a;break;case g:h=w/e;break;case r:h=w/t;break;default:h=w}return i?h:l.a(h)},o.daysInMonth=function(){return this.endOf(D).$D},o.$locale=function(){return Y[this.$L]},o.locale=function(s,u){if(!s)return this.$L;var i=this.clone(),h=z(s,u,!0);return h&&(i.$L=h),i},o.clone=function(){return l.w(this.$d,this)},o.toDate=function(){return new Date(this.valueOf())},o.toJSON=function(){return this.isValid()?this.toISOString():null},o.toISOString=function(){return this.$d.toISOString()},o.toString=function(){return this.$d.toUTCString()},c}(),ct=B.prototype;return E.prototype=ct,[["$ms",n],["$s",r],["$m",g],["$H",m],["$W",f],["$M",D],["$y",F],["$D",x]].forEach(function(c){ct[c[1]]=function(o){return this.$g(o,c[0],c[1])}}),E.extend=function(c,o){return c.$i||(c(o,B,E),c.$i=!0),E},E.locale=z,E.isDayjs=st,E.unix=function(c){return E(1e3*c)},E.en=Y[V],E.Ls=Y,E.p={},E})});var St=U((le,Mt)=>{"use strict";var ee=require("os"),mt=ee.homedir();Mt.exports=t=>{if(typeof t!="string")throw new TypeError(`Expected a string, got ${typeof t}`);return mt?t.replace(/^~(?=$|\/|\\)/,mt):t}});var ue={};Jt(ue,{default:()=>At});module.exports=Ut(ue);var $=require("@raycast/api");var v=require("@raycast/api"),$t=I(ft()),Dt=I(pt()),nt=I(require("path")),Et=I(yt()),q=I(require("fs")),bt=I(St()),wt=()=>{};var ne=(t,e)=>`
${t.split(`
`).map(n=>{let r=n.match(/^( *)/)?.[0].length||0;return e?`${"*".repeat(r+1)} ${n.trimStart()}`:`${" ".repeat(r)}- ${n.trimStart()}`}).join(`
`)}`,kt=t=>q.default.promises.lstat(t).then(e=>{if(!e.isDirectory())throw`Folder does not exist: ${t}`}).catch(e=>{throw e.code==="ENOENT"?`Folder does not exist: ${t}`:"Error"}),at=()=>(0,bt.default)((0,v.getPreferenceValues)().graphPath),Nt=()=>kt(at()),re=()=>{let t=nt.default.join(at(),"/logseq/config.edn");return q.default.promises.readFile(t,{encoding:"utf8"}).then(e=>(0,Dt.parseEDNString)(e.toString(),{mapAs:"object",keywordAs:"string"}))};var se=()=>re().then(t=>({fileFormat:t["preferred-format"]==="org"?".org":".md",journalsDirectory:t["journals-directory"]||"journals",dateFormat:t["journal/file-name-format"]||"yyyy_MM_dd"})),ie=t=>se().then(({dateFormat:e,journalsDirectory:a,fileFormat:n})=>nt.default.join(t,a,`${(0,$t.getDateForPageWithoutBrackets)(new Date,e)}${n}`));var Ot=()=>ie(at()),oe=t=>q.default.promises.access(t).catch(e=>{if(e.code==="ENOENT")return q.default.promises.writeFile(t,"");throw e}),jt=()=>{(0,v.showToast)({style:v.Toast.Style.Failure,title:"Logseq graph path is invalid",message:"Update the path and try again."})},Ft=(t,e)=>{let a=e.endsWith(".org");return kt(nt.default.dirname(e)).then(()=>oe(e)).then(()=>q.default.promises.appendFile(e,ne(t,a)))};var ae=()=>(0,Et.default)().format("HH:mm"),Tt=t=>{let e=t;return(0,v.getPreferenceValues)().addQuickCaptureTag&&(e="[[quick capture]]: "+e),(0,v.getPreferenceValues)().insertTime&&(e=`**${ae()}** `+e),e};var Z=require("react/jsx-runtime");function At(){let{pop:t}=(0,$.useNavigation)();async function e(a){if(!a.content)return(0,$.showToast)({style:$.Toast.Style.Failure,title:"\u{1F41D} Type something to get started"}),!1;let n=Tt(a.content);return Nt().catch(r=>{throw jt(),r}).then(()=>(0,$.showToast)({style:$.Toast.Style.Animated,title:"Adding notes"})).then(Ot).then(r=>Ft(n,r)).then(()=>(0,$.showHUD)("\u2705 Note added")).then(t).catch(r=>(0,$.showToast)({style:$.Toast.Style.Failure,title:"Failed",message:r})).catch(wt),!0}return(0,Z.jsx)($.Form,{actions:(0,Z.jsx)($.ActionPanel,{children:(0,Z.jsx)($.Action.SubmitForm,{title:"Add quick notes",onSubmit:e})}),children:(0,Z.jsx)($.Form.TextArea,{id:"content",title:"Content",placeholder:"Enter notes"})})}
